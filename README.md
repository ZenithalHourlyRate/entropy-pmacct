# Entropy pmacct configuration files

In this repo, several necessary configuration files are provided for those
hosts in `entropy/gravity` to support monitoring and collecting of the flows
in `entropy/gravity`.

These files are primarily configured for `entropy` now, but minor changes can
be done to transform them to satisfy the need of `gravity`.

## Install pmacct

Since hosts in `entropy/gravity` are mainly debian boxes, we suggest one 
command to rule them all.

```bash
$ sudo apt install pmacct
```

For Arch users, however, `pmacct` is not in the official repos, but only in
AUR, hence we recommend

```bash
$ [AUR helper] -S pmacct
```

## Proper placement of the files

The file `entropy.conf`, `entropy.network.lst` and  `entropy.pretag.map`
should be placed in `/etc/pmacct/` since we have fixed the path to them in
`entropy.conf`.

## Necessary changes in the files

First we need to determine `entropy.pretag.map`, which is a unique id for 
you box in the final statistics.

For entropy hosts with the subnet `2001:470:4c22:ae86:babe:XXX0::/92` where
`XXX` is your unique id, we convert `(XXX)_16=(YYYY)_10`, namely decimal number.
For example, `(41)_16=(65)_10`. Then we fill the field as

```
set_tag = YYYY
```

Now consider the `[redacted]` field in `entropy.conf`, they can be accessed
via `i@zenithal.me` or `t.me/ZenithalH`, or you can hack into the database
to obtain them.

## Comment on entropy.network.lst

This list provides an ip-to-subnet mapping, which should be altered greatly
for gravity hosts.

Now this file is generated by a script in the `entropy.git` repo, but it 
can not change automatically, which may cause inconsistency. The issue should
be resolved latter by `sync etc` effort of other participants.
